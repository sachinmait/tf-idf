<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TF-IDF Interactive Lab</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Krub:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        /* Custom styles to match the neo-brutalist aesthetic */
        body {
            font-family: 'Krub', sans-serif;
        }
        .neo-shadow {
            box-shadow: 8px 8px 0px 0px rgba(0,0,0,1);
        }
        .neo-shadow-sm {
             box-shadow: 4px 4px 0px 0px rgba(0,0,0,1);
        }
        .neo-shadow-lg {
            box-shadow: 12px 12px 0px 0px rgba(0,0,0,1);
        }
        .border-3 {
            border-width: 3px;
        }
    </style>
</head>
<body class="bg-[#F7E2C6]">

    <div class="min-h-screen p-4 md:p-8">
        <div class="max-w-6xl mx-auto">
            <header class="bg-[#F3B3D1] border-4 border-black p-8 mb-8 neo-shadow-lg">
                <h1 class="text-4xl md:text-5xl font-bold uppercase mb-2 text-black" style="text-shadow: 3px 3px 0px rgba(255,255,255,0.7);">
                    TF-IDF Interactive Lab
                </h1>
                <p class="text-xl font-bold text-gray-800">Natural Language Processing Explained</p>
            </header>

            <!-- Tab Buttons -->
            <div id="tabs-container" class="flex gap-4 mb-8 flex-wrap">
                <button data-tab="learn" class="tab-button px-6 py-3 border-4 border-black font-bold uppercase text-lg flex items-center gap-2 transition-all bg-[#F7C58F] neo-shadow-sm">
                    <i data-lucide="book-open" class="w-5 h-5"></i> Learn
                </button>
                <button data-tab="calculator" class="tab-button px-6 py-3 border-4 border-black font-bold uppercase text-lg flex items-center gap-2 transition-all bg-white hover:bg-[#F3B3D1] neo-shadow-sm">
                    <i data-lucide="calculator" class="w-5 h-5"></i> Calculator
                </button>
                <button data-tab="matrix" class="tab-button px-6 py-3 border-4 border-black font-bold uppercase text-lg flex items-center gap-2 transition-all bg-white hover:bg-[#D0F1FC] neo-shadow-sm">
                    <i data-lucide="layout-grid" class="w-5 h-5"></i> Full Matrix
                </button>
            </div>

            <main>
                <!-- Learn Section -->
                <div id="learn-section" class="tab-content space-y-6">
                    <div class="bg-[#F7C58F] border-4 border-black p-6 neo-shadow">
                        <div class="flex items-start gap-4">
                            <i data-lucide="lightbulb" class="w-8 h-8 flex-shrink-0 mt-1"></i>
                            <div>
                                <h3 class="text-2xl font-bold mb-3">What is TF-IDF?</h3>
                                <p class="text-lg leading-relaxed">
                                    <strong>TF-IDF</strong> (Term Frequency-Inverse Document Frequency) is a numerical statistic that shows how important a word is to a document in a collection of documents.
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="bg-[#F3B3D1] border-4 border-black p-6 neo-shadow">
                            <h4 class="text-xl font-bold mb-3 uppercase">TF - Term Frequency</h4>
                            <p class="mb-4 text-lg">How often a word appears in a document.</p>
                            <div class="bg-white border-3 border-black p-4 font-mono text-sm">TF = (Times word appears) / (Total words in document)</div>
                        </div>
                        <div class="bg-[#D0F1FC] border-4 border-black p-6 neo-shadow">
                            <h4 class="text-xl font-bold mb-3 uppercase">IDF - Inverse Document Frequency</h4>
                            <p class="mb-4 text-lg">How rare or common a word is across all documents.</p>
                            <div class="bg-white border-3 border-black p-4 font-mono text-sm">IDF = log(Total documents / Documents with word)</div>
                        </div>
                    </div>
                    <div class="bg-[#99D5B1] border-4 border-black p-6 neo-shadow">
                        <h4 class="text-xl font-bold mb-3 uppercase">Final TF-IDF Score</h4>
                        <div class="bg-white border-3 border-black p-6 font-mono text-2xl text-center font-bold">TF-IDF = TF multiplied by IDF</div>
                        <div class="mt-4 space-y-2 text-lg">
                            <p><strong>High TF-IDF:</strong> Word is frequent in this document but rare overall (important!).</p>
                            <p><strong>Low TF-IDF:</strong> Word is either rare in this document or common everywhere (less important).</p>
                        </div>
                    </div>
                </div>

                <!-- Calculator Section -->
                <div id="calculator-section" class="tab-content space-y-6 hidden">
                    <!-- This content will be generated by JavaScript -->
                </div>

                <!-- Matrix Section -->
                <div id="matrix-section" class="tab-content space-y-6 hidden">
                    <!-- This content will be generated by JavaScript -->
                </div>
            </main>

            <footer class="mt-12 bg-black text-white border-4 border-black p-6 neo-shadow">
                <p class="text-center font-bold text-lg">
                    Understanding TF-IDF helps in document similarity, search engines, and keyword extraction!
                </p>
            </footer>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- STATE & CONSTANTS ---
            const documents = [
                "the cat loves to play with the ball",
                "the dog loves to run in the park",
                "the bird sings beautifully in the morning"
            ];
            let activeTab = 'learn';
            let selectedWord = '';
            let selectedDoc = 0;
            const allWords = [...new Set(documents.join(' ').toLowerCase().split(' '))].sort();

            // --- DOM ELEMENTS ---
            const tabsContainer = document.getElementById('tabs-container');
            const tabContents = document.querySelectorAll('.tab-content');
            const calculatorSection = document.getElementById('calculator-section');
            const matrixSection = document.getElementById('matrix-section');
            const tabButtons = document.querySelectorAll('.tab-button');

            // --- CALCULATION FUNCTIONS ---
            const calculateTF = (term, doc) => {
                const words = doc.toLowerCase().split(' ');
                const termCount = words.filter(w => w === term.toLowerCase()).length;
                return termCount / words.length;
            };

            const calculateDF = (term) => {
                return documents.filter(doc =>
                    doc.toLowerCase().split(' ').includes(term.toLowerCase())
                ).length;
            };

            const calculateIDF = (term) => {
                const df = calculateDF(term);
                if (df === 0) return 0;
                return Math.log(documents.length / df);
            };

            const calculateTFIDF = (term, docIndex) => {
                const tf = calculateTF(term, documents[docIndex]);
                const idf = calculateIDF(term);
                return tf * idf;
            };

            // --- RENDER FUNCTIONS ---
            const renderCalculator = () => {
                const resultsHTML = selectedWord ? `
                    <div class="bg-[#99D5B1] border-4 border-black p-6 neo-shadow">
                        <h4 class="text-xl font-bold mb-4 uppercase">
                            Calculations for "${selectedWord}" in Doc ${selectedDoc + 1}
                        </h4>
                        <div class="space-y-4">
                            <div class="bg-white border-3 border-black p-4">
                                <p class="font-bold text-lg mb-2">1. Term Frequency (TF)</p>
                                <p class="font-mono text-sm mb-2">
                                    Word appears ${documents[selectedDoc].toLowerCase().split(' ').filter(w => w === selectedWord).length} times 
                                    in ${documents[selectedDoc].split(' ').length} words
                                </p>
                                <p class="text-2xl font-bold text-[#F3B3D1]">
                                    TF = ${calculateTF(selectedWord, documents[selectedDoc]).toFixed(4)}
                                </p>
                            </div>
                            <div class="bg-white border-3 border-black p-4">
                                <p class="font-bold text-lg mb-2">2. Inverse Document Frequency (IDF)</p>
                                <p class="font-mono text-sm mb-2">
                                    Word appears in ${calculateDF(selectedWord)} out of ${documents.length} documents
                                </p>
                                <p class="text-2xl font-bold text-[#D0F1FC]">
                                    IDF = ${calculateIDF(selectedWord).toFixed(4)}
                                </p>
                            </div>
                            <div class="bg-[#F7C58F] border-3 border-black p-4">
                                <p class="font-bold text-lg mb-2">3. Final TF-IDF Score</p>
                                <p class="text-3xl font-bold text-black">
                                    TF-IDF = ${calculateTFIDF(selectedWord, selectedDoc).toFixed(4)}
                                </p>
                            </div>
                        </div>
                    </div>` : '';
                
                calculatorSection.innerHTML = `
                    <div class="bg-[#F7C58F] border-4 border-black p-6 neo-shadow">
                        <h4 class="text-xl font-bold mb-4 uppercase">Our Document Collection:</h4>
                        <div id="documents-list" class="space-y-3">
                            ${documents.map((doc, idx) => `
                                <div data-doc-id="${idx}" class="doc-item bg-white border-4 border-black p-4 cursor-pointer transition-all ${selectedDoc === idx ? 'bg-yellow-100 neo-shadow-sm' : ''}">
                                    <span class="font-bold mr-2">Doc ${idx + 1}:</span>
                                    <span class="font-mono">${doc}</span>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    <div class="bg-[#D0F1FC] border-4 border-black p-6 neo-shadow">
                        <h4 class="text-xl font-bold mb-4 uppercase">Select a Word:</h4>
                        <div id="words-list" class="flex flex-wrap gap-3">
                            ${allWords.map(word => `
                                <button data-word="${word}" class="word-button px-4 py-2 border-3 border-black font-bold uppercase text-sm transition-all ${selectedWord === word ? 'bg-[#F3B3D1] neo-shadow-sm translate-x-1 translate-y-1' : 'bg-white hover:bg-[#F3B3D1] neo-shadow-sm'}">
                                    ${word}
                                </button>
                            `).join('')}
                        </div>
                    </div>
                    ${resultsHTML}
                `;
            };

            const renderMatrix = () => {
                matrixSection.innerHTML = `
                    <div class="bg-[#D0F1FC] border-4 border-black p-6 neo-shadow">
                        <h3 class="text-2xl font-bold mb-3 uppercase">Complete TF-IDF Matrix</h3>
                        <p class="text-lg">This shows TF-IDF scores for every word in every document!</p>
                    </div>
                    <div class="overflow-x-auto">
                        <div class="inline-block min-w-full bg-white border-4 border-black neo-shadow">
                            <table class="min-w-full">
                                <thead class="bg-[#F3B3D1] border-b-4 border-black">
                                    <tr>
                                        <th class="border-r-3 border-black px-4 py-3 text-left font-bold uppercase">Word</th>
                                        ${documents.map((_, idx) => `<th class="border-r-3 border-black px-4 py-3 text-center font-bold uppercase">Doc ${idx + 1}</th>`).join('')}
                                    </tr>
                                </thead>
                                <tbody>
                                    ${allWords.map((word, widx) => `
                                        <tr class="${widx % 2 === 0 ? 'bg-yellow-50' : 'bg-white'}">
                                            <td class="border-r-3 border-t-3 border-black px-4 py-3 font-mono font-bold">${word}</td>
                                            ${documents.map((_, didx) => {
                                                const score = calculateTFIDF(word, didx);
                                                let bgColor = 'transparent';
                                                if (score > 0.15) bgColor = '#99D5B1'; // Green
                                                else if (score > 0.05) bgColor = '#F7C58F'; // Yellow
                                                return `<td class="border-r-3 border-t-3 border-black px-4 py-3 text-center font-mono" style="background-color: ${bgColor};">${score.toFixed(3)}</td>`;
                                            }).join('')}
                                        </tr>
                                    `).join('')}
                                </tbody>
                            </table>
                        </div>
                    </div>
                     <div class="bg-[#99D5B1] border-4 border-black p-6 neo-shadow">
                        <h4 class="text-xl font-bold mb-3 uppercase">Observations</h4>
                        <div class="space-y-2 text-lg">
                            <p>GREEN - <strong>High scores:</strong> Words that are unique to specific documents</p>
                            <p>YELLOW - <strong>Medium scores:</strong> Somewhat distinctive words</p>
                            <p>WHITE - <strong>Low scores:</strong> Common words appearing everywhere like "the"</p>
                        </div>
                    </div>
                `;
            };

            const updateUI = () => {
                // Update tab buttons style
                tabButtons.forEach(button => {
                    const tab = button.dataset.tab;
                    button.classList.remove('bg-[#F7C58F]', 'bg-[#F3B3D1]', 'bg-[#D0F1FC]', 'translate-x-1', 'translate-y-1');
                    button.classList.add('bg-white');
                    if(tab === activeTab) {
                        if (tab === 'learn') button.classList.add('bg-[#F7C58F]');
                        if (tab === 'calculator') button.classList.add('bg-[#F3B3D1]');
                        if (tab === 'matrix') button.classList.add('bg-[#D0F1FC]');
                        button.classList.add('translate-x-1', 'translate-y-1');
                    }
                });

                // Update visible content
                tabContents.forEach(content => {
                    if (content.id === `${activeTab}-section`) {
                        content.classList.remove('hidden');
                    } else {
                        content.classList.add('hidden');
                    }
                });

                // Render dynamic content if needed
                if (activeTab === 'calculator') {
                    renderCalculator();
                } else if (activeTab === 'matrix') {
                    renderMatrix();
                }
            };
            
            // --- EVENT LISTENERS ---
            tabsContainer.addEventListener('click', (e) => {
                const button = e.target.closest('.tab-button');
                if (button) {
                    activeTab = button.dataset.tab;
                    updateUI();
                }
            });

            // Using event delegation for dynamic content
            calculatorSection.addEventListener('click', (e) => {
                const docItem = e.target.closest('.doc-item');
                const wordButton = e.target.closest('.word-button');
                
                if (docItem) {
                    selectedDoc = parseInt(docItem.dataset.docId, 10);
                    renderCalculator(); // Re-render to update selection style and results
                }

                if (wordButton) {
                    selectedWord = wordButton.dataset.word;
                    renderCalculator(); // Re-render to show calculations
                }
            });

            // --- INITIALIZATION ---
            lucide.createIcons();
            updateUI();
        });
    </script>
</body>
</html>
